{%- liquid
  if collection
    assign product_url = product.url | within: collection
  else
    assign product_url = product.url
  endif

  assign product_images = product.media | where: 'media_type', 'image'
  if settings.prod_thumb_hover_image and product_images.size > 1
    assign show_hover_image = true
  else
    assign show_hover_image = false
  endif

  assign cheapest_variant = product.variants | sort: 'price' | first
-%}




 

                
            





<div data-product-id="{{ product.id }}" class="CT_product-block product-block {% if numb > per_row %} hide {% endif %}" {% if animate %}data-cc-animate{% endif %}>
  <div class="block-inner">
    <div class="block-inner-inner">
      {% if product.featured_media %}
        {%- liquid
          assign aspect_ratios_same = true
          for media in product.media offset: 1
            if media.preview_image.aspect_ratio != product.media.first.preview_image.aspect_ratio
              assign aspect_ratios_same = false
              break
            endif
          endfor
        -%}
                           
     
      
        <div class="image-cont {% if show_hover_image %}image-cont--with-secondary-image {% if aspect_ratios_same %}image-cont--same-aspect-ratio{% endif %}{% endif %}">          
           <div class="ct_hart_icon ct_hart_icon-media">
                 {% render 'ZooomyListWishlistColl' , product: product %}
          </div>
          
          <a class="product-link{% if settings.quickbuy_style == 'whole' %} quickbuy-toggle{% endif %}" href="{{ product_url }}" aria-label="{{ product.title | escape }}" tabindex="-1">            
            <div class="image-label-wrap">
              <div>
                {%- if show_hover_image -%}
                  <div class="product-block__image CTT-product-block__image product-block__image--primary{% if product.featured_media.id == product.media.first.id %}{% assign active_media_found = true %} product-block__image--active{% endif %}{% if product_images.last.id == product.featured_media.id %} product-block__image--show-on-hover{% endif %}" data-media-id="{{ product.media.first.id }}">
                   {%- comment -%}
                    <div class="rimage-outer-wrapper">
                      <div class="rimage-wrapper lazyload--placeholder"
                           {% if animate %}data-cc-animate="{% if animate_type %}{{ animate_type }}{% endif %}" {% if animate_delay %}data-cc-animate-delay="{{ animate_delay }}"{% endif %}{% endif %}>
                        <img loading="lazy" src="{{ product.media.first.preview_image | img_url: '' }}"
                             data-src="{{ product.media.first.preview_image | img_url: '' }}"
                             data-widths="[180, 220, 300, 360, 460, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                             data-aspectratio="{{ product.media.first.preview_image.aspect_ratio }}"
                             data-sizes="auto"
                             alt="{{ product.media.first.preview_image.alt | escape }}"
                             class="lazyload" alt=""  />
                      </div>
                    </div>
                   {%- endcomment -%}
                    {%- render 'responsive-image', image: product.media.first.preview_image, manual_image_load: manual_image_load, min_aspect_ratio: 0.6, aspect_ratio: custom_aspect_ratio, no_max_width: true, cover: settings.prod_thumb_crop -%}
                    
                  </div>
                  {%- for media in product_images offset: 1 limit: 1 -%}
                    {%- liquid
                      assign image_state_class = ''
                      if media.id == product.featured_media.id
                        assign active_media_found = true
                        assign image_state_class = 'product-block__image--active'
                      else
                        if active_media_found
                          assign active_media_found = false
                          assign image_state_class = 'product-block__image--show-on-hover product-block__image--inactivated'
                        else
                          assign image_state_class = 'product-block__image--inactivated'
                        endif
                      endif
                    -%}
                    <div class="product-block__image CTTT_product-block__image product-block__image--secondary rimage-wrapper lazyload--placeholder {{ image_state_class }}"
                        data-media-id="{{ media.id }}"
                        data-image-index="{{ forloop.index }}">
                      {% if template contains 'collection' %} 
                      <img loading="lazy" class="lazyload--manual rimage-background lazyImage fade-in{% if settings.prod_thumb_crop %} cover{% endif %}"
                          src="{{ media.preview_image | image_url: width: 1 }}"
                          data-src="{{ media.preview_image | image_url: width: 1 }}"
                          width="{{ media.preview_image.width }}"
                          height="{{ media.preview_image.height }}"
                           {%- comment -%}
                           data-lazy-bgset-aspect-ratio="{{ media.preview_image.aspect_ratio }}"
                           data-lazy-bgset-width="{{ media.preview_image.width }}"
                           data-sizes="auto"
                           {%- endcomment -%}
                           data-parent-fit="{% if settings.prod_thumb_crop %}cover{% else %}contain{% endif %}">
                      {% else %}
                      <div class="lazyload--manual rimage-background fade-in{% if settings.prod_thumb_crop %} cover{% endif %}"
                           data-lazy-bgset-src="{{ media.preview_image | img_url: 'master' }}"
                          data-lazy-bgset-aspect-ratio="{{ media.preview_image.aspect_ratio }}"
                          data-lazy-bgset-width="{{ media.preview_image.width }}"
                          data-sizes="auto"
                           data-parent-fit="{% if settings.prod_thumb_crop %}cover{% else %}contain{% endif %}"></div>
                      {% endif %}
                    </div>
                  {%- endfor -%}
                {%- else -%}
                  <div class="product-block__image product-block__image--primary product-block__image--active" data-media-id="{{ product.featured_media.id }}">
                    {%- render 'responsive-image', image: product.featured_media.preview_image, manual_image_load: manual_image_load, min_aspect_ratio: 0.6, aspect_ratio: custom_aspect_ratio, no_max_width: true, cover: settings.prod_thumb_crop -%}
                  </div>
                {%- endif -%}
              </div>
              {%- if show_hover_image -%}
                {%- unless no_swiping -%}
                  
                  <!-- <div class="product-block__image-dots" aria-hidden="true">
                    <div class="product-block__image-dot product-block__image-dot--active"></div><div class="product-block__image-dot"></div>
                    {%- if product_images.size > 2 -%}
                      <div class="product-block__image-dot product-block__image-dot--more"></div>
                    {%- endif -%}
                  </div> -->
                {%- endunless -%}
              {%- endif -%}
              {% render 'product-label', product: product, cheapest_variant: cheapest_variant %}



              {% assign price_ct=product.price | money_without_currency  %}
                  {% assign limited_discount=false %}
                  {% assign limited_price=false %}
                  {% assign bargain=false %}
              
                  {%- assign savingsd = product.compare_at_price | minus: product.price | times: 100.0 | divided_by: product.compare_at_price | round  -%}
                
                {% assign f_price=product.price | money_without_currency  %}
                {% assign final_price_remove=f_price | remove:","  %}
                {% assign final_price=final_price_remove | plus:0  %}
  
                {% if savingsd >= 10 and savingsd <= 50  %}
                       {% assign limited_discount= true %}
                    {% endif %}
              {% if final_price >= 1300 and final_price <= 2000  %}
                 {% assign limited_price= true %}
              {% endif %}
              {% if final_price > 2000   %}
                 {% assign bargain= true %}
              {% endif %}



              <div class="ct_custom_badge  coll">
              {% if product.tags contains "Rakshabandhan24" %}
                <span class="ct-rakhi_badge">Rakhi Special</span>
                 {% else %}
              
                  {% if product.metafields.custom.best_seller_badge == true %}
                    <div class="ct_best_badge">Bestseller</div> 
                    
                  {% else %}
                      {% assign fast_sell=true %}
                      {% if limited_price and  limited_discount %}
                         <div class="ct_tag limited_tag">  
                                Limited Deal
                            </div>
                        {% assign fast_sell=false %}
                      {% endif %}                   
                      
                   
                      
                      {% if bargain and  limited_discount %}
                        {% comment %}
                        <div class="ct_tag bargain_tag">
                            <!-- Bargain Buy -->
                          Price Crash
                         </div>
                      {% endcomment %}
                         {% assign fast_sell=false %}
                      {% endif %}       
      
      
                       {% if product.metafields.custom.best_seller_badge == true %}
                      
                          {% else %}
                            {% assign pro_quantity = product.variants.first.inventory_quantity %}
                          {% if pro_quantity <= 3 and fast_sell and final_price >= 1000 %}
                          <div  class="ct_sell_badge">Selling Fast</div>   
                        {% endif %}
                      {% endif %} 
                  
                {% endif %} 
              {% endif %}
                
                {% comment %}
                    <div class="ct_tag bargain_tag">
                    {% if lowest_discount and  lowest_price %}
                    Lowest 
                    {% endif %}                   
                    
                  </div>
                {% endcomment %}
                </div>




              


              
           

            </div>
          </a>
          {% comment %} {%- if show_hover_image -%}
          <a class="image-page-button image-page-button--previous" href="#" aria-label="{{ 'general.accessibility_labels.previous' | t | escape }}" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
          </a>
          <a class="image-page-button image-page-button--next" href="#" aria-label="{{ 'general.accessibility_labels.previous' | t | escape }}" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
          </a>
          {%- endif -%} {% endcomment %}

          <div class="quickbuy_block">
            {% if settings.quickbuy_style == 'button' %}
            {% unless no_quick_buy %}
            <a class="btn btn--secondary quickbuy-toggle" href="{{ product_url }}">
              {%- render 'icon-show' -%}
              <span>{{ 'products.quick_buy.launch' | t }}</span>
            </a>
            {% endunless %}
            {% endif %}
          </div>





{% assign colors = '' %}
{% for variant in product.variants %}
  {% unless colors contains variant.option1 %}
    {% assign colors = colors | append: variant.option1 | append: ',' %}
  {% endunless %}
{% endfor %}

{% assign unique_colors = colors | split: ',' | uniq %}
{% assign total_unique_colors = unique_colors.size %}

              {% if total_unique_colors > 1 %}
 <div class="ct_cart_color_varient"> 
 {% if total_unique_colors == 0 %} 
{% else %}
   
   {% render 'varient-svg' %}
  {{ total_unique_colors }}{% if total_unique_colors == 1 %}{% else %}+{% endif %}
{% endif %}
  
</div>
{% endif %}
          



          
        </div>
      {% else %}
        <div class="image-cont">
          <div class="placeholder-image">{{ 'product-1' | placeholder_svg_tag }}</div>
        </div>
      {% endif %}

      <div class="product-info">
        <div class="inner">
          <div class="innerer">
            <a class="CT-product-link product-link{% if settings.quickbuy_style == 'whole' %} quickbuy-toggle{% endif %}" href="{{ product_url }}">
              {%- if section.settings.show_vendor -%}
              <div class="vendor">{{ product.vendor }}</div>
              {%- endif -%}

              <div class="product-block__title ct_product-block__title">
                {% if product.title.size > 30 %}
                <span class="tooltip">{{ product.title }}</span>
                {% endif %}
                {{ product.title | truncate: 30 }}</div>

              {%- if settings.prod_thumb_show_subtitle and product.metafields.descriptors.subtitle != blank -%}
              <div class="product-block__subtitle">{{ product.metafields.descriptors.subtitle }}</div>
              {%- endif -%}


              {% comment %}
              <div class="ct_hart_icon">
                 {% render 'ZooomyListWishlistColl' , product: product %}
              </div>
              {% endcomment %}
              


              
            </a>



              {% if  emi %}
          
              
              {% assign t1="2,33.33,33.33,199,4999" %}
              {% assign t2="4,33.33,16.66,5000,9999" %}
              {% assign t3="6,33.33,11.40,10000,100000" %}
              {% assign snap_main= cheapest_variant.price | money_without_currency  %}
                                              
              {% assign   main_price_convert_int = snap_main | remove:"," %}   
                                              
              {% assign main_price_snap = main_price_convert_int | plus: 0 %}       
              
                        
                {% assign numbers_t1 = t1 | split: ',' %}
                {% assign numbers_t2 = t2 | split: ','  %}
                {% assign numbers_t3 = t3 | split: ','  %}
                                              
                {% assign dp="" %}
                {% assign emi="" %}
                              {% assign t1_1 = numbers_t1[1] | plus:0 %}
                              {% assign t1_2 = numbers_t1[2] | plus:0 %}
                              {% assign t1_3 = numbers_t1[3] | plus:0 %}
                              {% assign t1_4 = numbers_t1[4] | plus:0 %}

                              {% assign t2_1 = numbers_t2[1] | plus:0 %}
                              {% assign t2_2 = numbers_t2[2] | plus:0 %}
                              {% assign t2_3 = numbers_t2[3] | plus:0 %}
                              {% assign t2_4 = numbers_t2[4] | plus:0 %}

                              {% assign t3_1 = numbers_t3[1] | plus:0 %}
                              {% assign t3_2 = numbers_t3[2] | plus:0 %}
                              {% assign t3_3 = numbers_t3[3] | plus:0 %}
                              {% assign t3_4 = numbers_t3[4] | plus:0 %}
            
                              {% if  t1_3 > main_price_snap  %}
                              
                                  {% elsif main_price_snap >= t1_3 and  main_price_snap <= t1_4  %}
                                  
                                        {% assign dp= main_price_snap | times : t1_1 | divided_by:100 %}
                                        {% assign emi= main_price_snap | times : t1_2 | divided_by:100 %}
                                    
                                  {% elsif main_price_snap >= t2_3 and  main_price_snap <= t2_4  %}
                                  
                                        {% assign dp= main_price_snap | times :  t2_1 | divided_by:100 %}
                                        {% assign emi= main_price_snap | times : t2_2 | divided_by:100 %}
                                    
                                  {% elsif main_price_snap >= t3_3 and  main_price_snap <= t3_4  %}
                                  
                                        {% assign dp= main_price_snap | times : t3_1 | divided_by:100 %}
                                        {% assign emi= main_price_snap | times : t3_2 | divided_by:100 %}
                                    
                              {% endif %}
              
                                  {% if main_price_snap > 5000 and  main_price_snap <= 100001  %}
                                       {% assign dp= main_price_snap | times : t2_2 | divided_by:100 %}
                                  {% endif %}

              
                         {%   assign prc= cheapest_variant.price | money_without_currency | remove:"," %}
                                     {%   assign prc=  prc | plus:0 %} 
                   
                          {% if prc > 1000 %}
              
              
                            {% assign number = dp %} 
              
                        {% capture rounded_number %}
                          {% assign rounded = number | round %}
                          {% assign decimal = number | minus: rounded %}
                          {% if decimal >= 0.5 %}
                            {{ rounded | plus: 1 }}
                          {% else %}
                            {{ rounded }}
                          {% endif %}
                        {% endcapture %}

                            <div class="emi-price-main">
                              <div class="emi-price-inner">
                                <div class="emi-price-top"><span>â‚¹{{ rounded_number }}</span>/month (No Cost EMI)</div>
                                <div class="emi-price-bottom">
                                  <div class="emi-mrp-text">
                                    MRP
                                  </div>
                                  <div class="emi-sale-price">{{ product.price | money_with_currency }}</div>
                                  {% if cheapest_variant.compare_at_price > cheapest_variant.price %}
                                      <div class="emi-mrp-price">{{ product.compare_at_price  | money_with_currency }}</div>
                                  {% endif %}
                                </div>
                                {% if product.metafields.theme.label !=blank %}
                                 <div class="ct_product_overlay">
                                   <span>{{ product.metafields.theme.label }}</span>
                                 </div>
                                {% endif %}
                              </div>
                             </div>

                    
              {% endif %}
                {% endif %}


            



            
            
            <div class="price-wishlist">
              
              <div class="product-price featured-collection-price">

                
                
                <div class="CT_featured-collection-price">
                  {% if product.price_varies %}
                    <span class="product-price__item product-price__from">{{ 'products.listing.from' | t }}</span>
                  {% endif %}
                  <span class="CT_product-price__item product-price__item product-price__amount {% if cheapest_variant.compare_at_price > cheapest_variant.price %}product-price__amount--on-sale{% endif %} theme-money">
                    {%- if settings.product_currency_code_enabled -%}
                      {{ cheapest_variant.price  | money_with_currency }}
                    {%- else -%}
                      {{ cheapest_variant.price| money }}
                    {%- endif -%}
                  </span>
                
                  {% if cheapest_variant.compare_at_price > cheapest_variant.price %}
                    <span class=" product-price__item CT-product-price__compare product-price__compare theme-money">{{ cheapest_variant.compare_at_price | money }}</span>
                  {% endif %}


                
                  {%- if cheapest_variant.compare_at_price > cheapest_variant.price -%}
                      <div class="CT_parsent_off_">
                      {%- assign savings = cheapest_variant.compare_at_price | minus: cheapest_variant.price | times: 100.0 | divided_by: cheapest_variant.compare_at_price | round | append: '%' -%}
                       {{ savings }} OFF
                      </div>
                  {% endif %}


                  

              </div>


                



<div class="ct_product_overlay-main">
                
{% if product.metafields.theme.label !=blank %}
 <div class="ct_product_overlay">
   <span>{{ product.metafields.theme.label }}</span>
 </div>
{% endif %}
                {%- if cheapest_variant.compare_at_price > cheapest_variant.price -%}
                    {%- assign discount_amount = cheapest_variant.compare_at_price | minus: cheapest_variant.price   -%}
                    {%- assign discount_amountpr = discount_amount | money_without_currency  | remove:',' -%}
                    {%- assign discount_amountmn = discount_amountpr | plus:0  -%}
                  

                   {%- if discount_amountmn > 1000 -%}
                    {% comment %}
                     
                    <div class="CT_price_off">
                     <img src="https://cdn.shopify.com/s/files/1/0796/1959/files/ddd.png?v=1710506104?width=18" class="notlazy" />
                       
                        Big Save <span> {{ discount_amount | money | remove: ' ' }}</span>
                    </div>
                    {% endcomment %}
                     
                     {% else %}
                               {% endif %} 
                {%- endif %}

</div>
                 


                                
                


                

                  {% if settings.prod_sold_out_show and product.available == false %}
                    <span class="product-price__item price-label price-label--sold-out">{{ 'products.labels.sold_out' | t }}</span>
                  {% elsif settings.prod_pre_order_label_show and product.template_suffix contains 'preorder' %}
                    <span class="product-price__item price-label price-label--preorder">{{ 'products.product.preorder' | t }}</span>
                  {% comment %}{% elsif settings.prod_sale_show and cheapest_variant.compare_at_price > cheapest_variant.price %}
                    <span class="product-price__item price-label price-label--sale">{{ 'products.labels.sale' | t }}</span>{% endcomment %}
                  {% endif %}
                </div>

                {% render 'unit-price', variant: cheapest_variant %}

              {% capture the_snippet_fave_icon %}{% render 'ssw-widget-faveicon' with product.id %}{% endcapture %}
              {% unless the_snippet_fave_icon contains 'Liquid error' %}
                  {{ the_snippet_fave_icon }}
              {% endunless %}

              {% comment %}
              {% render 'ZooomyListWishlistColl' , product: product %}
              {% endcomment %}

               

          
{% comment %}

  {% assign colors = '' %}
  {% for variant in product.variants %}
    {% unless colors contains variant.option1 %}
      {% assign colors = colors | append: variant.option1 | append: ',' %}
    {% endunless %}
  {% endfor %}
  {% assign unique_colors = colors | split: ',' | uniq %}
  <ul>
    <li>
    {% for color in unique_colors %}
      {% unless color == blank %}
        <!-- <li data_all={{ forloop.length }}>{{ color }}</li> -->
        {{ forloop.length }}{% if forloop.length == 1 %}color{% else %}colors{% endif %}
      {% endunless %}
    {% endfor %}
    </li>
  </ul>
  {% endcomment %}




{% comment %}

{% assign colors = '' %}
{% for variant in product.variants %}
  {% unless colors contains variant.option1 %}
    {% assign colors = colors | append: variant.option1 | append: ',' %}
  {% endunless %}
{% endfor %}

{% assign unique_colors = colors | split: ',' | uniq %}
{% assign total_unique_colors = unique_colors.size %}

              {% if total_unique_colors > 1 %}
 <div class="ct_cart_color_varient"> 
 {% if total_unique_colors == 0 %} 
{% else %}
  
  <img src="https://cdn.shopify.com/s/files/1/0796/1959/files/kushals_varient_icon_8421bbfe-7f4b-41ac-b69a-283332d3ee31.svg?v=1709097181" />
  {{ total_unique_colors }} {% if total_unique_colors == 1 %}{% else %}+{% endif %}
{% endif %}
  
</div>
{% endif %}
  {% endcomment %}
              
              
            
              

            </div>

            {%- if settings.prod_thumb_show_options -%}
              {%- liquid
                 assign option_limit = 5
                 assign options_to_show = settings.swatch_option_name | append: ',' | append: settings.prod_thumb_options_names | replace: ', ', ',' | split: ','
              -%}
            {%- for product_option in product.options_with_values -%}
                {%- if options_to_show contains product_option.name -%}
                  {%- liquid
                    if settings.swatch_enabled and settings.swatch_option_name contains product_option.name
                      assign is_swatch = true
                    else
                      assign is_swatch = false
                    endif
                  -%}
            	 {%- if product_option.values.size <= 5 -%}
                  <div class="test product-block-options {% if is_swatch %} product-block-options--swatch{% endif %}" data-option-name="{{ product_option.name | escape }}">
                    <div class="product-block-options__inner">
                      {%- if product.options.size == 1 -%}
                        {%- for variant in product.variants -%}
                          {% if settings.prod_thumb_options_disable_unavailable == false or variant.available %}
                          {%- liquid
                            if is_swatch and settings.swatch_method == 'image' and variant.featured_media == blank
                              continue
                            endif
                          -%}

                            
                           
                          <span class="product-block-options__item{% unless settings.prod_thumb_options_disable_unavailable == false or variant.available %} 123 product-block-options__item--unavailable{% endunless %}{% if forloop.index > option_limit and is_swatch %} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ variant.title | downcase | escape }}"
                            {% if variant.featured_media %}data-media="{{ variant.featured_media.id }}"{% endif %}
                            {% if is_swatch -%}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ variant.title | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and variant.featured_media.preview_image -%}
                                data-bgset="{{ variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {%- endif %}><span class="product-block-options__item__text ">{{ variant.title }}</span></span>
                          {%- endif %}
                        {%- endfor -%}
                        
                        {%- for variant in product.variants -%}
                          {% unless settings.prod_thumb_options_disable_unavailable == false or variant.available %}
                          {%- liquid
                            if is_swatch and settings.swatch_method == 'image' and variant.featured_media == blank
                              continue
                            endif
                          -%}
                            
                          <span class="product-block-options__item{% unless settings.prod_thumb_options_disable_unavailable == false or variant.available %} 123 product-block-options__item--unavailable{% endunless %}{% if forloop.index > option_limit and is_swatch %} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ variant.title | downcase | escape }}"
                            {% if variant.featured_media %}data-media="{{ variant.featured_media.id }}"{% endif %}
                            {% if is_swatch -%}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ variant.title | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and variant.featured_media.preview_image -%}
                                data-bgset="{{ variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {%- endif %}><span class="product-block-options__item__text">{{ variant.title }}</span></span>
                          {% endunless %}
                        {%- endfor -%}

                        {%- if product.variants.size > option_limit and is_swatch -%}
                          {%- assign remaining = product.variants.size | minus: option_limit -%}
                          <span class="product-block-options__more-label">{{ 'collections.general.more_swatches' | t: count: remaining }}</span>
                        {%- endif -%}
                      {%- else -%}
                        {%- assign product_option_position_0index = product_option.position | minus: 1 -%}
                    
                        {%- for product_option_value in product_option.values -%}
                          {%- liquid
                            assign option_value_variant = false
                            for variant in product.variants
                              if variant.options[product_option_position_0index] == product_option_value
                                assign option_value_variant = variant
                                break
                              endif
                            endfor

                            if settings.prod_thumb_options_disable_unavailable
                              assign is_unavailable = true
                              for variant in product.variants
                                if variant.available and variant.options[product_option_position_0index] == product_option_value
                                  assign is_unavailable = false
                                  break
                                endif
                              endfor
                            else
                              assign is_unavailable = false
                            endif

                            if is_swatch and settings.swatch_method == 'image' and option_value_variant.featured_media == blank
                              continue
                            endif
                          -%}
                          {% unless is_unavailable %}
                          <span class="product-block-options__item{% if is_unavailable %}  product-block-options__item--unavailable{% endif %}{% if forloop.index > option_limit and is_swatch %} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ product_option_value | downcase | escape }}"
                            {% if option_value_variant.featured_media %}data-media="{{ option_value_variant.featured_media.id }}"{% endif %}
                            {% if is_swatch %}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ product_option_value | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and option_value_variant.featured_media -%}
                                data-bgset="{{ option_value_variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {% endif %}><span class="product-block-options__item__text">{{ product_option_value }}</span></span>
                          {% endunless %}
                        {%- endfor -%}
                       
                        {%- for product_option_value in product_option.values -%}
                          {%- liquid
                            assign option_value_variant = false
                            for variant in product.variants
                              if variant.options[product_option_position_0index] == product_option_value
                                assign option_value_variant = variant
                                break
                              endif
                            endfor

                            if settings.prod_thumb_options_disable_unavailable
                              assign is_unavailable = true
                              for variant in product.variants
                                if variant.available and variant.options[product_option_position_0index] == product_option_value
                                  assign is_unavailable = false
                                  break
                                endif
                              endfor
                            else
                              assign is_unavailable = false
                            endif

                            if is_swatch and settings.swatch_method == 'image' and option_value_variant.featured_media == blank
                              continue
                            endif
                          -%}
                          {% if is_unavailable %}
                          <span class="product-block-options__item{% if is_unavailable %}  product-block-options__item--unavailable{% endif %}{% if forloop.index > option_limit and is_swatch %} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ product_option_value | downcase | escape }}"
                            {% if option_value_variant.featured_media %}data-media="{{ option_value_variant.featured_media.id }}"{% endif %}
                            {% if is_swatch %}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ product_option_value | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and option_value_variant.featured_media -%}
                                data-bgset="{{ option_value_variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {% endif %}><span class="product-block-options__item__text">{{ product_option_value }}</span></span>
                          {% endif %}
                          {%- endfor -%}
                        
                        
                        {%- if product_option.values.size > option_limit and is_swatch -%}
                          {%- assign remaining = product_option.values.size | minus: option_limit -%}
                          <span class="product-block-options__more-label">{{ 'collections.general.more_swatches' | t: count: remaining }}</span>
                        {%- endif -%}
                      {%- endif -%}
                    </div>
                  </div>
          		 {%- else -%}
             
          		  {%- assign new_option_limit = 3 -%}
              
          		  <div class="option_limit product-block-options {% if is_swatch %} product-block-options--swatch{% endif %}" data-option-name="{{ product_option.name | escape }}">
                    <div class="product-block-options__inner">

                      {%- if product.options.size == 1 -%} 

                       {% assign incrementNumb = 0 %}
                          {%- for variant in product.variants -%}
                            {% if settings.prod_thumb_options_disable_unavailable == false or variant.available %}
                              {% assign incrementNumb = incrementNumb | plus:1 %}
                            {%- liquid
                              if is_swatch and settings.swatch_method == 'image' and variant.featured_media == blank
                                continue
                              endif
                            -%}
                            <span class="product-block-options__item{% unless settings.prod_thumb_options_disable_unavailable == false or variant.available %} product-block-options__item--unavailable{% endunless %}{% if incrementNumb > new_option_limit and is_swatch %} for-loop--{{ forloop.index }} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                              data-option-item="{{ variant.title | downcase | escape }}"
                              {% if variant.featured_media %}data-media="{{ variant.featured_media.id }}"{% endif %}
                              {% if is_swatch -%}
                                {%- if settings.swatch_method == 'standard' -%}
                                  data-swatch="{{ variant.title | escape | downcase }}"
                                {%- elsif settings.swatch_method == 'image' and variant.featured_media.preview_image -%}
                                  data-bgset="{{ variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                                {%- endif -%}
                              {%- endif %}><span class="product-block-options__item__text">{{ variant.title }}</span></span>
                            {%- endif %}
                            {%- endfor -%}

                          {%- for variant in product.variants -%}
                            {% unless settings.prod_thumb_options_disable_unavailable == false or variant.available %}
                              {% assign incrementNumb = incrementNumb | plus:1 %}
                            {%- liquid
                              if is_swatch and settings.swatch_method == 'image' and variant.featured_media == blank
                                continue
                              endif
                            -%}
                            <span class="product-block-options__item{% unless settings.prod_thumb_options_disable_unavailable == false or variant.available %} product-block-options__item--unavailable{% endunless %}{% if incrementNumb > new_option_limit and is_swatch %} for-loop--{{ forloop.index }} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                              data-option-item="{{ variant.title | downcase | escape }}"
                              {% if variant.featured_media %}data-media="{{ variant.featured_media.id }}"{% endif %}
                              {% if is_swatch -%}
                                {%- if settings.swatch_method == 'standard' -%}
                                  data-swatch="{{ variant.title | escape | downcase }}"
                                {%- elsif settings.swatch_method == 'image' and variant.featured_media.preview_image -%}
                                  data-bgset="{{ variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                                {%- endif -%}
                              {%- endif %}><span class="product-block-options__item__text">{{ variant.title }}</span></span>
                            {% endunless %}
                            {%- endfor -%}
                        
                          
                        {%- if product.variants.size > new_option_limit and is_swatch -%}
                          {%- assign remaining = product.variants.size | minus: new_option_limit -%}
                          <span class="product-block-options__more-label">{{ 'collections.general.more_swatches' | t: count: remaining }}</span>
                        {%- endif -%}
                      {%- else -%}
                   
                        {%- assign product_option_position_0index = product_option.position | minus: 1 -%}
                        {% assign productOption = '' %}
                        {%- for product_option_value in product_option.values -%}
                          {%- liquid
                            assign option_value_variant = false
                            for variant in product.variants
                              if variant.options[product_option_position_0index] == product_option_value
                                assign option_value_variant = variant
                                break
                              endif
                            endfor

                            if settings.prod_thumb_options_disable_unavailable
                              assign is_unavailable = true
                              for variant in product.variants
                                if variant.available and variant.options[product_option_position_0index] == product_option_value
                                  assign is_unavailable = false
                                  break
                                endif
                              endfor
                            else
                              assign is_unavailable = false
                            endif

                            if is_swatch and settings.swatch_method == 'image' and option_value_variant.featured_media == blank
                              continue
                            endif
                          -%}
                          {% unless is_unavailable %}
                            {% assign  productOption =  productOption | append: ',' | append: product_option_value %}
                            {% comment %}
                          <span class="product-block-options__item{% if is_unavailable %} product-block-options__item--unavailable{% endif %}{% if forloop.index > new_option_limit and is_swatch %} for-{{ forloop.index }} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ product_option_value | downcase | escape }}"
                            {% if option_value_variant.featured_media %}data-media="{{ option_value_variant.featured_media.id }}"{% endif %}
                            {% if is_swatch %}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ product_option_value | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and option_value_variant.featured_media -%}
                                data-bgset="{{ option_value_variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {% endif %}><span class="product-block-options__item__text">{{ product_option_value }}</span>
                          </span>
                        {% endcomment %}
                          {% endunless %}
                          {%- endfor -%}


                         
                        {%- for product_option_value in product_option.values -%}
                        
                          {%- liquid
                            assign option_value_variant = false
                            for variant in product.variants
                              if variant.options[product_option_position_0index] == product_option_value
                                assign option_value_variant = variant
                                break
                              endif
                            endfor

                            if settings.prod_thumb_options_disable_unavailable
                              assign is_unavailable = true
                              for variant in product.variants
                                if variant.available and variant.options[product_option_position_0index] == product_option_value
                                  assign is_unavailable = false
                                  break
                                endif
                              endfor
                            else
                              assign is_unavailable = false
                            endif

                            if is_swatch and settings.swatch_method == 'image' and option_value_variant.featured_media == blank
                              continue
                            endif
                          -%}
                          {% if is_unavailable %} 
                          {% assign  productOption =  productOption | append: ',' | append: product_option_value %}
                         {% comment %}
                          <span class="product-block-options__item{% if is_unavailable %} product-block-options__item--unavailable{% endif %}{% if forloop.index > new_option_limit and is_swatch %} for-{{ forloop.index }} product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ product_option_value | downcase | escape }}"
                            {% if option_value_variant.featured_media %}data-media="{{ option_value_variant.featured_media.id }}"{% endif %}
                            {% if is_swatch %}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ product_option_value | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and option_value_variant.featured_media -%}
                                data-bgset="{{ option_value_variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {% endif %}><span class="product-block-options__item__text">{{ product_option_value }}</span>
                          </span>
                        {% endcomment %}
                          {% endif%}
                         {%- endfor -%}
                         {% assign  productOption =  productOption | remove_first: ',' | split: ',' %}
                         
                         {%- for product_option_value in  productOption -%}
                        
                          {%- liquid
                            assign option_value_variant = false
                            for variant in product.variants
                              if variant.options[product_option_position_0index] == product_option_value
                                assign option_value_variant = variant
                                break
                              endif
                            endfor

                            if settings.prod_thumb_options_disable_unavailable
                              assign is_unavailable = true
                              for variant in product.variants
                                if variant.available and variant.options[product_option_position_0index] == product_option_value
                                  assign is_unavailable = false
                                  break
                                endif
                              endfor
                            else
                              assign is_unavailable = false
                            endif

                            if is_swatch and settings.swatch_method == 'image' and option_value_variant.featured_media == blank
                              continue
                            endif
                          -%}
                         
                         
                          <span class="product-block-options__item{% if is_unavailable %} product-block-options__item--unavailable{% endif %}{% if forloop.index > new_option_limit and is_swatch %}   product-block-options__item--truncated{% endif %}{% if is_swatch %} lazyload{% if manual_image_load %}--manual{% endif %}{% endif %}"
                            data-option-item="{{ product_option_value | downcase | escape }}"
                            {% if option_value_variant.featured_media %}data-media="{{ option_value_variant.featured_media.id }}"{% endif %}
                            {% if is_swatch %}
                              {%- if settings.swatch_method == 'standard' -%}
                                data-swatch="{{ product_option_value | escape | downcase }}"
                              {%- elsif settings.swatch_method == 'image' and option_value_variant.featured_media -%}
                                data-bgset="{{ option_value_variant.featured_media.preview_image | img_url: '48x48', crop: settings.swatch_crop_align }}"
                              {%- endif -%}
                            {% endif %}><span class="product-block-options__item__text">{{ product_option_value }}</span></span>
                          
                         {%- endfor -%}

                        {%- if product_option.values.size > new_option_limit and is_swatch -%}
                          {%- assign remaining = product_option.values.size | minus: new_option_limit -%}
                          <span class="product-block-options__more-label">{{ 'collections.general.more_swatches' | t: count: remaining }}</span>
                        {%- endif -%}
                      {%- endif -%}
                    </div>
                  </div>
                 {%- endif -%}
          		{%- endif -%}
              {%- endfor -%}
            {%- endif -%}

            {%- if settings.enable_product_reviews_collection and product.metafields.reviews.rating_count != blank and product.metafields.reviews.rating_count > 0 -%}
              <div class="product-block__rating">
                {% render 'rating', rating_value: product.metafields.reviews.rating.value %}
                <span class="cc-rating-custom-caption">
                  {{ product.metafields.reviews.rating_count }} {{ 'products.product.reviews_link' | t: count: product.metafields.reviews.rating_count | downcase }}
                </span>
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  </div>

  {%- if settings.quickbuy_style != 'off' -%}
    {%- unless no_quick_buy_markup or no_quick_buy -%}
      <div class="quickbuy-container">
        <a href="#" class="close-detail" aria-label="{{ 'products.quick_buy.close' | t }}" tabindex="-1">{% render 'svg-x' %}</a>
        <div class="inner"></div>
      </div>
    {%- endunless -%}
  {%- endif -%}
</div>
